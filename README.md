# Ansible Role: Minecraft Server with IndustrialCraft

üì¶ Ansible-—Ä–æ–ª—å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Minecraft —Å–µ—Ä–≤–µ—Ä–∞ —Å –º–æ–¥–æ–º **IndustrialCraft** –Ω–∞ Ubuntu Server.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- –£—Å—Ç–∞–Ω–æ–≤–∫—É Java
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É Forge + IndustrialCraft
- –°–æ–∑–¥–∞–Ω–∏–µ systemd unit
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é JVM –ø–æ–¥ –º–∞–ª—É—é –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å (–¥–æ 2 –ì–ë)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ systemd timer

---

## üöÄ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Ubuntu 20.04 / 22.04 (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ)
- Ansible >= 2.10
- –ú–∏–Ω–∏–º—É–º 2 –ì–ë –û–ó–£ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è low-end VPS)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```bash
.
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ inventory.ini
‚îú‚îÄ‚îÄ playbook.yml
‚îî‚îÄ‚îÄ roles
    ‚îî‚îÄ‚îÄ minecraft-ic2
        ‚îú‚îÄ‚îÄ defaults
        ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
        ‚îú‚îÄ‚îÄ files
        ‚îú‚îÄ‚îÄ handlers
        ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
        ‚îú‚îÄ‚îÄ meta
        ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
        ‚îú‚îÄ‚îÄ tasks
        ‚îÇ   ‚îú‚îÄ‚îÄ log_cleanup.yml
        ‚îÇ   ‚îî‚îÄ‚îÄ main.yml
        ‚îú‚îÄ‚îÄ templates
        ‚îÇ   ‚îú‚îÄ‚îÄ clean_logs.service.j2
        ‚îÇ   ‚îú‚îÄ‚îÄ clean_logs.sh.j2
        ‚îÇ   ‚îú‚îÄ‚îÄ clean_logs.timer.j2
        ‚îÇ   ‚îú‚îÄ‚îÄ eula.txt.j2
        ‚îÇ   ‚îî‚îÄ‚îÄ minecraft.service.j2
        ‚îî‚îÄ‚îÄ vars
```
---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –∏–ª–∏ `host_vars`.

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è              | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é           | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------------------|----------------------------------|----------|
| `minecraft_version`    | `1.12.2`                         | –í–µ—Ä—Å–∏—è Minecraft |
| `forge_version`        | `14.23.5.2859`                   | –í–µ—Ä—Å–∏—è Forge |
| `ic2_url`              | `https://...`                   | URL –Ω–∞ `.jar` –º–æ–¥ IndustrialCraft |
| `minecraft_user`       | `minecraft`                     | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–µ—Ä–≤–∏—Å–∞ |
| `minecraft_group`      | `minecraft`                     | –ì—Ä—É–ø–ø–∞ —Å–µ—Ä–≤–∏—Å–∞ |
| `minecraft_home`       | `/opt/minecraft`                | –ü—É—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ |
| `memory_min`           | `512M`                          | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º –ø–∞–º—è—Ç–∏ JVM |
| `memory_max`           | `1536M`                         | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º –ø–∞–º—è—Ç–∏ JVM |
| `jvm_flags`            | `-XX:+UseG1GC ...`              | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–ª–∞–≥–∏ –¥–ª—è low-RAM |
| `log_retention_days`   | `7`                             | –ö–æ–ª-–≤–æ –¥–Ω–µ–π –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ |
| `log_cleanup_time`     | `"03:00"`                       | –í—Ä–µ–º—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–æ–≤ |

---

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –î–æ–±–∞–≤–∏—Ç—å –≤ `requirements.yml`

```yaml
- src: ./minecraft_server
  name: minecraft_server
```

2. –ü—Ä–∏–º–µ—Ä site.yml
```yaml
- name: Install Minecraft server
  hosts: minecraft
  become: true
  roles:
    - minecraft_server
```
3. –ü—Ä–∏–º–µ—Ä inventory.ini
```bash
[minecraft]
your.server.ip
```


‚∏ª

üî• –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

JVM-—Ñ–ª–∞–≥–∏ –∏ Xmx/Xms –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è VPS —Å 2 –ì–ë RAM. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ Aikar‚Äôs JVM flags.

‚∏ª

üßπ –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤

–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 03:00 –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è systemd-timer, –∫–æ—Ç–æ—Ä—ã–π —É–¥–∞–ª—è–µ—Ç –ª–æ–≥–∏ —Å—Ç–∞—Ä—à–µ log_retention_days. –¢–∞–π–º–µ—Ä –∏ —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è.

‚∏ª

üõ† TODO / –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
	‚Ä¢	–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏—Ä–∞ –≤ tar.gz
	‚Ä¢	–ó–∞–≥—Ä—É–∑–∫–∞ –±—ç–∫–∞–ø–æ–≤ –≤ S3 –∏–ª–∏ GDrive
	‚Ä¢	–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥—Ä—É–≥–∏—Ö –º–æ–¥–æ–≤ –ø–æ —Å–ø–∏—Å–∫—É

‚∏ª

üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–∫–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é molecule –∏ docker, –∏–ª–∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–º VPS:

ansible-playbook -i inventory.ini site.yml



‚∏ª

üßæ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π —Å–≤–æ–±–æ–¥–Ω–æ üéÆ

‚∏ª


